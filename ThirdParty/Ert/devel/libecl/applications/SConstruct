import os
import os.path
import sys
sys.path += ["../../scons-config"]
import global_config
from   global_config import LIBUTIL
from   global_config import LIBECL
from   global_config import LIBPLOT
from   global_config import LIBCONFIG
from   global_config import LIBGEOMETRY
from   global_config import get_target
from   global_config import add_program


lib_path     = "../lib"
include_path = "../include"
bin_path     = "../bin"  

conf = global_config.get_conf(os.getcwd() , 2)
env  = Environment()
lib_list = ["lapack" ,  "blas" , "plplotd" , "m" , "z"  , "pthread"]
if conf.g2c:
   lib_list.append( "g2c" )

conf.update_env( env , [ LIBECL , LIBPLOT , LIBCONFIG , LIBGEOMETRY , LIBUTIL ] , ext_liblist = lib_list , link = True)
env.Append( CPPPATH = conf.PLPLOT_INCLUDE_PATH )
env.Append( LIBPATH = conf.PLPLOT_LIB_PATH )

add_program(env , conf ,  bin_path , "make_grid"         , "make_grid.c" )
add_program(env , conf ,  bin_path , "grdecl_grid"       , "grdecl_grid.c" )
add_program(env , conf ,  bin_path , "sum_write"         , "sum_write.c" )
add_program(env , conf ,  bin_path , "grdecl_test.x"     , "grdecl_test.c")
add_program(env , conf ,  bin_path , "load_test.x"       , "load_test.c")
add_program(env , conf ,  bin_path , "select_test.x"     , "select_test.c")
add_program(env , conf ,  bin_path , "key_list.x"        , "key_list.c")
add_program(env , conf ,  bin_path , "ecl_quantile"      , "ecl_quantile.c"    )
add_program(env , conf ,  bin_path , "convert.x"         , "convert.c"         )
add_program(env , conf ,  bin_path , "ecl_pack.x"        , "ecl_pack.c"        )
add_program(env , conf ,  bin_path , "ecl_test.x"        , "ecl_test.c"        )
add_program(env , conf ,  bin_path , "ecl_unpack.x"      , "ecl_unpack.c"      )
add_program(env , conf ,  bin_path , "esummary.x"        , "esummary.c"        )
add_program(env , conf ,  bin_path , "grid_info.x"       , "grid_info.c"       )
add_program(env , conf ,  bin_path , "grid_dump.x"       , "grid_dump.c"       )
add_program(env , conf ,  bin_path , "grid_dump_ascii.x" , "grid_dump_ascii.c" )
add_program(env , conf ,  bin_path , "grid_layer.x"      , "grid_layer.c"      )
add_program(env , conf ,  bin_path , "kw_extract.x"      , "kw_extract.c"      )
add_program(env , conf ,  bin_path , "kw_list.x"         , "kw_list.c"         )
add_program(env , conf ,  bin_path , "run_gravity.x"     , "run_gravity.c"     )
add_program(env , conf ,  bin_path , "view_restart.x"    , "view_restart.c"    )
add_program(env , conf ,  bin_path , "view_rft.x"        , "view_rft.c"        )
add_program(env , conf ,  bin_path , "summary.x"         , "view_summary.c"    )
add_program(env , conf ,  bin_path , "vprofile.x"        , "vprofile.c"        )
add_program(env , conf ,  bin_path , "ens_plot.x"        , "ens_plot.c" , CPPDEFINES = "\'VIEWER=\"/usr/bin/display\"\'")

Default( bin_path )


